[{"title":"qemuè¿è¡Œriscv linux","date":"2018-02-02T12:12:35.000Z","path":"2018/02/02/qemu-run-riscv/","text":"è¿‡ç¨‹ï¼šåœ¨ç‰©ç†æœåŠ¡å™¨ä¸Šå®‰è£…qemuæ¨¡æ‹Ÿå™¨ï¼Œæ¨¡æ‹Ÿå™¨ä¸­è¿è¡ŒåŸºäºriscvæŒ‡ä»¤é›†ç¼–è¯‘çš„linuxé•œåƒæ–‡ä»¶ã€‚ å·¥å…·é›†åˆï¼š riscv-qemuï¼ˆæ¨¡æ‹Ÿå™¨ï¼Œå¯ä»¥æ¨¡æ‹Ÿè¿è¡ŒriscvæŒ‡ä»¤é›†çš„ç¨‹åºæˆ–é•œåƒï¼‰ riscv-toolsï¼ˆåŸºäºriscvæŒ‡ä»¤é›†çš„äº¤å‰ç¼–è¯‘å·¥å…·ï¼‰ riscv-pkï¼ˆç”¨äºåŒ…è£…å†…æ ¸æ–‡ä»¶vmlinuxï¼‰ busybox(ç”¨äºç»™linuxé•œåƒå®‰è£…åŸºæœ¬å‘½ä»¤ï¼Œå¦‚lsï¼Œcatï¼Œmvç­‰ç­‰) ä¸€ã€ä»é›¶å¼€å§‹é¦–å…ˆåˆ›å»ºä¸€ä¸ªå·¥ä½œç›®å½•å«åš$TOP,è¿›å…¥å·¥ä½œç›®å½•ï¼Œå¹¶å°†è®¾å®š$TOPç¯å¢ƒå˜é‡ $ mkdir riscv$ cd riscv$ $ export TOP=$(pwd) äºŒã€å®‰è£…riscv-toolchain1 . ä¸‹è½½äº¤å‰ç¼–è¯‘å·¥å…·: $ git clone https://github.com/riscv/riscv-tools.git$ cd $TOP/riscv-tools$ git submodule update --init --recursive 2 . ä¸ºäº†ç¼–è¯‘gccï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€äº›å…¶ä»–çš„ä¾èµ–åº“ï¼ŒåŒ…æ‹¬ flex, bison, autotools, libmpc, libmpfr, and libgmp. Ubuntuç³»ç»Ÿå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š $ sudo apt-get install autoconf automake autotools-dev curl device-tree-compiler libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf 3 . åœ¨å¼€å§‹å®‰è£…ä¹‹å‰ï¼Œéœ€è¦è®¾ç½®$RISCV,$PATHç¯å¢ƒå˜é‡ï¼Œè¿™äº›ç¯å¢ƒå˜é‡ä¼šåœ¨æ•´ä¸ªå®‰è£…è¿‡ç¨‹ä¸­ä½¿ç”¨: $ export RISCV=$TOP/riscv #å°†ä½œä¸ºæ‰€æœ‰å·¥å…·çš„å®‰è£…è·¯å¾„ --prefix=$RISCV$ export PATH=$PATH:$RISCV/bin 4 . å®‰è£…spikeå·¥å…·: $ ./build-spike-only.sh 5 . ç¼–è¯‘ riscv64-unknown-linux-gnu-gcc: $ cd riscv-gnu-toolchain$ ./configure --prefix=$RISCV è¿™ä¼šå°†riscv64-unknown-linux-gnu-gccä¸riscv64-unknown-elf-gccå·¥å…·ä¸€æ ·å®‰è£…åˆ°$RISCVï¼ŒåŒæ—¶ $RISCV/binå·²ç»è¢«æ·»åŠ ç½®PATHä¸­ï¼Œæ‰€ä»¥ä¸Šè¿°å·¥å…·å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ æœ€åæ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤ï¼Œè¿è¡Œbuild: $ make linux ä¸‰ã€å®‰è£…riscv-qemu1ã€å®‰è£…qemu: $ cd $TOP$ git clone https://github.com/riscv/riscv-qemu.git$ cd riscv-qemu $ git submodule update --init pixman $ mkdir build$ cd build$ ../configure $ make 2ã€æµ‹è¯•qemuçš„ç”¨æˆ·æ¨¡å¼: $ riscv64-unknown-linux-gnu-gcc hello.c -o hello$ ./riscv64-linux-user/qemu-riscv64 -L $RISCV/sysroot hello 3ã€æµ‹è¯•qemuçš„é•œåƒæ¨¡å¼:å¯åŠ¨qemuï¼Œè½½å…¥bblç¤ºä¾‹é•œåƒæ–‡ä»¶ï¼Œä¸‹è½½åœ°å€:bblvmlinuxinitramfs_dynamic $ riscv-qemu/riscv64-softmmu/qemu-system-riscv64 -kernel /home/tank/bblvmlinuxinitramfs_dynamic -nographic å››ã€ç¼–è¯‘busybox$ git clone https://github.com/mirror/busybox$ git checkout 1_28_stable$ cd busybox$ make allnoconfig$ make menuconfig #æŒ‰ç…§éœ€æ±‚è®¾å®šç¼–è¯‘é€‰é¡¹ã€äº¤å‰ç¼–è¯‘å·¥å…·$ make ARCH=riscv menuconfig #è®¾ç½®äº¤å‰ç¼–è¯‘å·¥å…·ã€ç¼–è¯‘é€‰é¡¹ã€inittabç­‰$ make -j8 CONFIG_STATIC=y, listed as â€œBuild BusyBox as a static binary (no shared libs)â€ in BusyBox Settings â†’ Build Options CONFIG_CROSS_COMPILER_PREFIX=riscv64-unknown-linux-gnu-, listed as â€œCross Compiler prefixâ€ in BusyBox Settings â†’ Build Options CONFIG_FEATURE_INSTALLER=y, listed as â€œSupport â€”install [-s] to install applet links at runtimeâ€ in BusyBox Settings â†’ General Configuration CONFIG_INIT=y, listed as â€œinitâ€ in Init utilities CONFIG_ASH=y, listed as â€œashâ€ in Shells CONFIG_ASH_JOB_CONTROL=n, listed as â€œAsh â†’ Job controlâ€ in Shells CONFIG_MOUNT=y, listed as â€œmountâ€ in Linux System Utilities CONFIG_FEATURE_USE_INITTAB=y, listed as â€œSupport reading an inittab fileâ€ in Init Utilities ç¼–è¯‘å®Œæˆåä¼šåœ¨busyboxç›®å½•ä¸‹ç”ŸæˆbusyboxäºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ äº”ã€ç¼–è¯‘riscv-linux1 . è·å–å†…æ ¸ä»£ç : $ cd $TOP$ git clone https://github.com/riscv/riscv-linux.git riscv-linux$ cd riscv-linux 2 . å‡†å¤‡ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿåˆå§‹åŒ–æ–‡ä»¶ï¼Œå‘½åä¸ºinitramfs.txt,å¯ä»¥åœ¨å…¶ä¸­åˆ›å»ºä»»æ„æƒ³è¦çš„æ–‡ä»¶å¤¹æ–‡ä»¶ï¼Œå¦‚ä¸‹æ˜¯æˆ‘çš„æ–‡ä»¶ç³»ç»Ÿæ ·ä¾‹ï¼š dir /dev 755 0 0nod /dev/console 644 0 0 c 5 1nod /dev/null 644 0 0 c 1 3dir /proc 755 0 0dir /bin 755 0 0dir /tmp 755 0 0file /bin/busybox /path/to/your/busybox 755 0 0slink /init /bin/busybox 755 0 0dir /sbin 755 0 0dir /usr 755 0 0dir /usr/bin 755 0 0dir /usr/sbin 755 0 0dir /etc 755 0 0file /etc/inittab /path/to/your/inittab 644 0 0dir /lib 755 0 0 3 . å‡†å¤‡ä¸€ä»½åˆå§‹åŒ–è¡¨ï¼Œå‘½åä¸ºinittab,æ”¾ç½®åœ¨å†…æ ¸çš„/etcç›®å½•ä¸‹ï¼Œå¦‚ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„inittabæ ·ä¾‹ï¼š ::sysinit:/bin/busybox mount -t proc proc /proc::sysinit:/bin/busybox mount -t tmpfs tmpfs /tmp::sysinit:/bin/busybox mount -o remount,rw /dev/htifblk0 /::sysinit:/bin/busybox --install -s/dev/console::sysinit:-/bin/ash 4 . ä¸‹é¢æ­£å¼å¼€å§‹ç¼–è¯‘å†…æ ¸,é¦–å…ˆé…ç½®ç¼–è¯‘é€‰é¡¹: $ make mrproper #å¾ˆé‡è¦$ make ARCH=riscv defconfig$ make ARCH=riscv menuconfig #è®¾ç½®äº¤å‰ç¼–è¯‘å·¥å…·ã€ç¼–è¯‘é€‰é¡¹ã€initramfsç­‰$ make -j8 ARCH=riscv å¦‚æœä¸æ‰§è¡Œmake mrproperç¼–è¯‘å†…æ ¸æ—¶å¯èƒ½å‡ºç°ç¼ºå°‘å¤´æ–‡ä»¶é”™è¯¯ menuconfig : â€œGeneral setup -&gt; Initial RAM Filesystemâ€¦â€ (CONFIG_BLK_DEV_INITRD=y) menuconfig : â€œGeneral setup -&gt; Initramfs source files (CONFIG_INITRAMFS_SRC=/path/to/your/initramfs.txt) menuconfig : â€œGeneral setup -&gt; Cross-compiler tool prefix (CONFIG_CROSS_COMPILER_PREFIX=riscv64-unknown-linux-gnu-) å…­ã€å¯åŠ¨qemuè¿è¡Œlinuxé•œåƒæ‰€æœ‰å‡†å¤‡å·¥ä½œå®Œæˆï¼Œä¸‹é¢å¼€å§‹è¿è¡Œlinuxé•œåƒ1 . é¦–å…ˆéœ€è¦é€šè¿‡pkå·¥å…·åŒ…ä¸­çš„bblå·¥å…·ä¸ºlinux kernelæ·»åŠ boot loader: $ cd &lt;riscv-pk&gt;/build$ rm -rf *$ ../configure --prefix=$RISCV --host=riscv64-unknown-linux-gnu --with-payload=&lt;riscv-linux&gt;/vmlinux$ make bbl 2 . æ¥ä¸‹æ¥é€šè¿‡qemuè¿è¡Œä¸Šä¸€æ­¥ä¸­ç”Ÿæˆçš„bblæ–‡ä»¶: riscv-qemu/riscv64-softmmu/qemu-system-riscv64 -kernel &lt;riscv-pk&gt;/build/bbl -nographic 3 . æ¥ä¸‹æ¥ä½ çš„å±å¹•ä¸Šä¼šæƒ³RVå›¾åƒï¼Œé€šè¿‡ä½ çš„åˆ¶ä½œçš„linuxé•œåƒä¹Ÿä¼šé€šè¿‡qemuè¿è¡Œï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»åœ¨å…¶ä¸­æ·»åŠ äº†busyboxå·¥å…·åŒ…ï¼Œä½ å¯ä»¥æ‰§è¡Œä¾‹å¦‚lsã€cdã€pwdç­‰æŒ‡ä»¤ã€‚é€šè¿‡è¿˜å¯ä»¥å°†è‡ªå·±ç¼–å†™çš„cè¯­è¨€ï¼Œgè¯­è¨€çš„ç¨‹åºé€šè¿‡riscvçš„å·¥å…·é“¾è¿›è¡Œç¼–è¯‘ï¼Œç„¶åæŒ‰ç…§æ ·ä¾‹ä¿®æ”¹initramfs.txtæ–‡ä»¶ï¼Œå°†ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶åŠ å…¥åˆ°å†…æ ¸çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç„¶åé‡æ–°ä»ç¼–è¯‘å†…æ ¸å¼€å§‹é‡æ–°æ‰§è¡Œä¸€éä¸Šè¿°è¿‡ç¨‹ï¼Œä¾¿å¯ä»¥åœ¨å†…æ ¸ä¸­è¿è¡Œä½ è‡ªå·±å†™çš„ç¨‹åºã€‚ ä¸ƒã€æœ€åæœ€åæˆ‘æƒ³è¯´çš„æ˜¯ï¼Œä¸Šè¿°è¿‡ç¨‹æ˜¯ä¸€ä¸ªéå¸¸ç¹ççš„è¿‡ç¨‹ï¼Œä½ éœ€è¦æœ‰è¶³å¤Ÿçš„è€å¿ƒä»¥åŠè¶³å¤Ÿè¿è¡Œï¼Œé¦–å…ˆgccå·¥å…·é“¾å’Œå†…æ ¸çš„ç¼–è¯‘å®‰è£…æ˜¯ä¸€ä¸ªéå¸¸è´¹äº‹çš„è¿‡ç¨‹ï¼Œä¸ä»…å¦‚æ­¤ä½ è¿˜é‡åˆ°å„ç§å„ç§è«åå…¶å¦™çš„é—®é¢˜ï¼Œå…¶ä¸­å„ä¸ªå·¥å…·é“¾ç‰ˆæœ¬çš„åŒ¹é…ä¾¿æ˜¯ä¸€ä¸ªä»¤äººæåº¦å¤´ç—›çš„é—®é¢˜.åšä¸»è¶³å¤Ÿå¹¸è¿ï¼Œåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œä¸Šè¿°è¿‡ç¨‹ä¸­éå¸¸å¹¸è¿çš„æ²¡æœ‰é‡åˆ°ç‰ˆæœ¬ä¸åŒ¹é…çš„é—®é¢˜ï¼Œå¸Œæœ›è¯¸ä½ä¹Ÿèƒ½å¦‚æ­¤å¹¸è¿ã€‚ å…«ã€æœ€åçš„æœ€åè¿‘æœŸå› ä¸ºå„ç§åŸå› éœ€è¦é‡æ–°ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬å¤ç°ä¸Šè¿°è¿‡ç¨‹ï¼Œè€—æ—¶è¿‘3å¤©é‡åˆ°äº†å„ç§å„æ ·çš„é—®é¢˜ã€‚æœ€åï¼Œåœ¨å¸ˆå…„çš„æç¤ºä¸‹ï¼Œé€‰æ‹©äº†sifiveå…¬å¸çš„é›†æˆå·¥å…·ã€‚å®Œæˆä¸Šè¿°å·¥ç¨‹åªéœ€è¦ï¼š $ git clone --recursive https://github.com/sifive/freedom-u-sdk$ cd freedom-u-sdk$ make all$ make qemu æ¥ä¸‹æ¥ä½ å°±ä¼šå‘ç°ï¼Œè‡ªå·±ä¹‹å‰æ‰€åšçš„ä¸€åˆ‡åŠªåŠ›åœ¨åˆ«äººçœ‹æ¥åªä¸è¿‡ä¸€ä¸ªè„šæœ¬å°±èƒ½è§£å†³ï¼Œå¹¶ä¸”ä½ ä¸ä¼šæƒ³åˆ°sifiveä¸ºä½ ç§»æ¤å¤šå°‘ä¾èµ–åº“ã€‚ã€‚ã€‚æœ€åç»™å¤§å®¶é€ä¸Šä¸€ä¸ªè¿è¡Œç•Œé¢å›¾ï¼ˆé»˜è®¤ç”¨æˆ·åä¸ºï¼šrootï¼Œå¯†ç ä¸ºï¼šsifiveï¼‰ï¼š Alt text","tags":[{"name":"riscv","slug":"riscv","permalink":"http://changzihao.me/tags/riscv/"},{"name":"qemu","slug":"qemu","permalink":"http://changzihao.me/tags/qemu/"}]},{"title":"ç²’å­ç¾¤ç®—æ³•(PSO) Python å®ç°","date":"2018-02-02T10:28:00.000Z","path":"2018/02/02/ç²’å­ç¾¤ç®—æ³•-PSO-Python-å®ç°/","text":"ä¸€ã€ç®€ä»‹ï¼š ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•æ˜¯ä¸€ç§åŸºäºç§ç¾¤å¯»ä¼˜çš„å¯å‘å¼æœç´¢ç®— æ³•ã€‚åœ¨1995å¹´ç”±Kennedy å’ŒEberhart é¦–å…ˆæå‡ºæ¥çš„ã€‚ å®ƒçš„ä¸»è¦å¯å‘æ¥æºäºå¯¹é¸Ÿç¾¤ç¾¤ä½“è¿åŠ¨è¡Œä¸ºçš„ç ”ç©¶ã€‚æˆ‘ ä»¬ç»å¸¸å¯ä»¥è§‚å¯Ÿåˆ°é¸Ÿç¾¤è¡¨ç°å‡ºæ¥çš„åŒæ­¥æ€§ï¼Œè™½ç„¶æ¯åª é¸Ÿçš„è¿åŠ¨è¡Œä¸ºéƒ½æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œä½†æ˜¯åœ¨æ•´ä¸ªé¸Ÿç¾¤çš„é£ è¡Œè¿‡ç¨‹ä¸­å´è¡¨ç°å‡ºäº†é«˜åº¦ä¸€è‡´æ€§çš„å¤æ‚è¡Œä¸ºï¼Œå¹¶ä¸”å¯ ä»¥è‡ªé€‚åº”çš„è°ƒæ•´é£è¡Œçš„çŠ¶æ€å’Œè½¨è¿¹ã€‚ é¸Ÿç¾¤å…·æœ‰è¿™æ ·çš„å¤æ‚é£è¡Œè¡Œä¸ºçš„åŸå› ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ¯ åªé¸Ÿåœ¨é£è¡Œè¿‡ç¨‹ä¸­éƒ½éµå¾ªäº†ä¸€å®šçš„è¡Œä¸ºè§„åˆ™ï¼Œå¹¶èƒ½å¤Ÿ æŒæ¡é‚»åŸŸå†…å…¶å®ƒé¸Ÿçš„é£è¡Œä¿¡æ¯ã€‚ äºŒã€åŸç† ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•å€Ÿé‰´äº†è¿™æ ·çš„æ€æƒ³ï¼Œæ¯ä¸ªç²’å­ä»£è¡¨å¾… æ±‚è§£é—®é¢˜æœç´¢è§£ç©ºé—´ä¸­çš„ä¸€ä¸ªæ½œåœ¨è§£ï¼Œå®ƒç›¸å½“äºä¸€åªé¸Ÿï¼Œâ€œé£è¡Œä¿¡æ¯â€åŒ…æ‹¬ç²’å­å½“å‰çš„ä½ç½®å’Œé€Ÿåº¦ä¸¤ä¸ªçŠ¶æ€é‡ã€‚ æ¯ä¸ªç²’å­éƒ½å¯ä»¥è·å¾—å…¶é‚»åŸŸå†…å…¶å®ƒä¸ªä½“çš„ä¿¡æ¯ï¼Œå¯¹æ‰€ ç»è¿‡çš„ä½ç½®è¿›è¡Œè¯„ä»·ï¼Œå¹¶æ ¹æ®è¿™äº›ä¿¡æ¯å’Œä½ç½®é€Ÿåº¦æ›´ æ–°è§„åˆ™ï¼Œæ”¹å˜è‡ªèº«çš„ä¸¤ä¸ªçŠ¶æ€é‡ï¼Œåœ¨â€œé£è¡Œâ€è¿‡ç¨‹ä¸­ ä¼ é€’ä¿¡æ¯å’Œäº’ç›¸å­¦ä¹ ï¼Œå»æ›´å¥½åœ°é€‚åº”ç¯å¢ƒã€‚ éšç€è¿™ä¸€è¿‡ç¨‹çš„ä¸æ–­è¿›è¡Œï¼Œç²’å­ç¾¤æœ€ç»ˆèƒ½å¤Ÿæ‰¾åˆ°é—®é¢˜ çš„è¿‘ä¼¼æœ€ä¼˜è§£ã€‚ ä¸‰ã€æ„æˆè¦ç´ 1 . ç²’å­ç¾¤ æ¯ä¸ªç²’å­å¯¹åº”æ‰€æ±‚è§£é—®é¢˜çš„ä¸€ä¸ªå¯è¡Œè§£ ç²’å­é€šè¿‡å…¶ä½ç½®å’Œé€Ÿåº¦è¡¨ç¤º ç²’å­iåœ¨ç¬¬nè½®çš„ä½ç½®: $x_n^{(i)}$ ç²’å­iåœ¨ç¬¬nè½®çš„é€Ÿåº¦: $v_n^{(i)}$ 2 . è®°å½• $p_{best}^{(i)}$ :ç²’å­ğ‘–çš„å†å²æœ€å¥½ä½ç½® $g_{best}$:å…¨å±€å†å²æœ€å¥½ä½ç½® 3 . è®¡ç®—é€‚åº”åº¦çš„å‡½æ•° é€‚åº”åº¦:$ğ‘“(ğ‘¥)$ å››ã€ç®—æ³•è¿‡ç¨‹æè¿°1 . åˆå§‹åŒ– åˆå§‹åŒ–ç²’å­ç¾¤:æ¯ä¸ªç²’å­çš„ä½ç½®å’Œé€Ÿåº¦ï¼Œå³ $x_0^{(i)}$ å’Œ $v_0^{(i)}$ åˆå§‹åŒ–$p_{best}^{(i)}$å’Œ$g_{best}$ 2 . å¾ªç¯æ‰§è¡Œå¦‚ä¸‹ä¸‰æ­¥ç›´è‡³æ»¡è¶³ç»“æŸæ¡ä»¶ è®¡ç®—æ¯ä¸ªç²’å­çš„é€‚åº”åº¦: $f(x_n^{(i)})$ æ›´æ–°æ¯ä¸ªç²’å­å†å²æœ€å¥½é€‚åº”åº¦åŠå…¶ç›¸åº”çš„ä½ç½®ï¼Œæ›´æ–°å½“å‰å…¨å±€æœ€å¥½é€‚ åº”åº¦åŠå…¶ç›¸åº”çš„ä½ç½® æ›´æ–°æ¯ä¸ªç²’å­çš„é€Ÿåº¦å’Œä½ç½® v_{n+1}^{(i)}=w*v_{n}^{(i)}+c_1*r_1*(p_{best}^{(i)}-x_{n}^{(i)})+c_2*r_2*(g_{best}-x_{n}^{(i)})x_{n+1}^{(i)}=x_n^{(i)}+v_{n+1}^{(i)} ä¸Šé¢å…¬å¼ä¸­ï¼šiè¡¨ç¤ºç²’å­ç¼–å·ï¼›nè¡¨ç¤ºæ—¶åˆ»ï¼Œåæ˜ åœ¨è¿­ä»£æ¬¡æ•°ä¸Šï¼›wæ˜¯æƒ¯æ€§æƒé‡ï¼Œä¸€èˆ¬è®¾ç½®åœ¨0.4&gt;å·¦å³ï¼›cè¡¨ç¤ºå­¦ä¹ å› å­ï¼Œä¸€èˆ¬éƒ½å–å€¼ä¸º2ï¼›Xpbestè¡¨ç¤ºçš„æ˜¯ç²’å­içš„ç»éªŒï¼Œä¹Ÿå³æ˜¯ç²’å­iæ‰€åˆ°è¿‡æœ€ä½³ä½ç½®ï¼›Xgbestä»£è¡¨çš„æ˜¯å…¨å±€æœ€ä¼˜ç²’å­çš„ä½ç½®ï¼›ræ˜¯0åˆ°1ä¹‹é—´çš„éšæœºå€¼ã€‚ 3 . ç®—æ³•ç»ˆæ­¢æ¡ä»¶ è¿­ä»£çš„è½®æ•° æœ€ä½³ä½ç½®è¿ç»­æœªæ›´æ–°çš„è½®æ•° é€‚åº”åº¦å‡½æ•°çš„å€¼åˆ°è¾¾é¢„æœŸè¦æ±‚ äº”ã€æ€»ç»“1 . å’Œé—ä¼ ç®—æ³•ç›¸æ¯” é—ä¼ ç®—æ³•å¼ºè°ƒâ€œé€‚è€…ç”Ÿå­˜â€ï¼Œä¸å¥½çš„ä¸ªä½“åœ¨ç«äº‰ä¸­è¢«æ·˜æ±°; PSOå¼ºè°ƒâ€œååŒåˆä½œâ€ï¼Œä¸å¥½çš„ä¸ªä½“é€šè¿‡å­¦ä¹ å‘å¥½ çš„æ–¹å‘è½¬å˜ã€‚ é—ä¼ ç®—æ³•ä¸­æœ€å¥½çš„ä¸ªä½“é€šè¿‡äº§ç”Ÿæ›´å¤šçš„åä»£æ¥ä¼ æ’­åŸºå› ; PSOä¸­çš„æœ€å¥½ä¸ªä½“é€šè¿‡å¸å¼•å…¶å®ƒä¸ªä½“å‘å®ƒé è¿‘æ¥æ–½åŠ å½±å“ã€‚ é—ä¼ ç®—æ³•çš„é€‰æ‹©æ¦‚ç‡åªä¸ä¸Šä¸€ä»£ç¾¤ä½“ç›¸å…³ï¼Œè€Œä¸å†å²æ— å…³ï¼Œç¾¤ä½“çš„ä¿¡æ¯å˜åŒ–è¿‡ç¨‹æ˜¯ä¸€ä¸ªMarkové“¾è¿‡ç¨‹; è€ŒPSOä¸­çš„ä¸ªä½“é™¤äº†æœ‰ä½ç½®å’Œé€Ÿåº¦å¤–ï¼Œè¿˜æœ‰ç€è¿‡å»çš„å†å²ä¿¡æ¯ ($p_{Best}$ã€$g_{Best}$)ã€‚ 2 . ä¼˜ç‚¹ æ˜“äºå®ç°; å¯è°ƒå‚æ•°è¾ƒå°‘; æ‰€éœ€ç§ç¾¤æˆ–å¾®ç²’ç¾¤è§„æ¨¡è¾ƒå°; ï± è®¡ç®—æ•ˆç‡é«˜ï¼Œæ”¶æ•›é€Ÿåº¦å¿«ã€‚ 3 . ç¼ºç‚¹ å’Œå…¶å®ƒæ¼”åŒ–è®¡ç®—ç®—æ³•ç±»ä¼¼ï¼Œä¸ä¿è¯æ”¶æ•›åˆ°å…¨å±€æœ€ä¼˜è§£ 4 . ä¸€ç§éšæœºä¼˜åŒ–ç®—æ³•ï¼Œé€‚ç”¨äºæ±‚è§£è¿ç»­è§£ç©ºé—´çš„ä¼˜åŒ–é—®é¢˜ å…­ã€å®ç°ç”¨pythonå®ç°ç²’å­ç¾¤ç®—æ³•ï¼Œæ±‚è§£å‡½æ•° $f(x)=x^3-5x^2-2x+3$ åœ¨å–å€¼èŒƒå›´[-2,5]ä¹‹é—´çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ #ğ‘“(ğ‘¥) =ğ‘¥3âˆ’5ğ‘¥2âˆ’2ğ‘¥+3#x = [2~5]import randomclass Bird(object): \"\"\" speed:é€Ÿåº¦ position:ä½ç½® fit:é€‚åº”åº¦ lbestposition:ç»å†çš„æœ€ä½³ä½ç½® lbestfit:ç»å†çš„æœ€ä½³çš„é€‚åº”åº¦å€¼ \"\"\" def __init__(self, speed, position, fit, lBestPosition, lBestFit): self.speed = speed self.position = position self.fit = fit self.lBestFit = lBestFit self.lBestPosition = lBestPositionclass PSO(object): \"\"\" fitFunc:é€‚åº”åº¦å‡½æ•° birdNum:ç§ç¾¤è§„æ¨¡ w:æƒ¯æ€§æƒé‡ c1,c2:ä¸ªä½“å­¦ä¹ å› å­ï¼Œç¤¾ä¼šå­¦ä¹ å› å­ solutionSpace:è§£ç©ºé—´ï¼Œåˆ—è¡¨ç±»å‹ï¼š[æœ€å°å€¼ï¼Œæœ€å¤§å€¼]\\ positonSpace:æ›´æ–°åè§£ç©ºé—´çš„èŒƒå›´ï¼Œåˆ—è¡¨ç±»å‹ï¼š[æœ€å°å€¼ï¼Œæœ€å¤§å€¼] stabel:è§£çš„ç¨³å®šæ¬¡æ•° max_stable:æœ€ä½³ä½ç½®è¿ç»­æœªæ›´æ–°çš„è½®æ•° \"\"\" def __init__(self, fitFunc, birdNum, w, c1, c2, solutionSpace, max_stable): self.fitFunc = fitFunc self.w = w self.c1 = c1 self.c2 = c2 self.birds, self.best = self.initbirds(birdNum, solutionSpace) self.positonSpace = [solutionSpace[0] - c1 *(solutionSpace[1] - solutionSpace[0]), solutionSpace[1] + c2 *(solutionSpace[1] - solutionSpace[0])] self.stable = 0 self.max_stable =max_stable def initbirds(self, size, solutionSpace): birds = [] for i in range(size): position = random.uniform(solutionSpace[0], solutionSpace[1]) speed = 0 fit = self.fitFunc(position) # (self, speed, position, fit, lBestPosition, lBestFit) birds.append(Bird(speed, position, fit, position, fit)) best = birds[0] for bird in birds : if bird.fit &gt; best.fit : best = bird return birds, best def updateBirds(self): for bird in self.birds: # æ›´æ–°é€Ÿåº¦ bird.speed = self.w * bird.speed \\ + self.c1 * random.random() * (bird.lBestPosition - bird.position) \\ + self.c2 * random.random() * (self.best.position - bird.position) # æ›´æ–°ä½ç½® bird.position = bird.position + bird.speed # ç›¸å¯¹äºsolutionSpaceè¿›è¡Œå½’ä¸€åŒ– bird.position = self.normalization(bird.position) # è·Ÿæ–°é€‚åº”åº¦ bird.fit = self.fitFunc(bird.position) # æŸ¥çœ‹æ˜¯å¦éœ€è¦æ›´æ–°ç»éªŒæœ€ä¼˜ if bird.fit &gt; bird.lBestFit: bird.lBestFit = bird.fit bird.lBestPosition = bird.position def solve(self, maxIter): # åªè€ƒè™‘äº†æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œå¦‚éœ€è€ƒè™‘é˜ˆå€¼ï¼Œæ·»åŠ åˆ¤æ–­è¯­å¥å°±å¥½ is_updated = 0 for i in range(maxIter): # æ›´æ–°ç²’å­ self.updateBirds() for bird in self.birds: # æŸ¥çœ‹æ˜¯å¦éœ€è¦æ›´æ–°å…¨å±€æœ€ä¼˜ if bird.fit &gt; self.best.fit: self.best = bird is_updated = 1 if is_updated : self.stable = 0 else : self.stable +=1 if self.stable &gt;= self.max_stable: return def normalization(self, position): postion =(position - self.positonSpace[0]) \\ / (self.positonSpace[1] - self.positonSpace[0]) postion = postion * (solutionSpace[1] - solutionSpace[0]) postion = postion + solutionSpace[0] return postiondef fx_max_fit(p): return p ** 3 - 5 * p * p - 2 * p + 3def fx_min_fit(p): return -(p ** 3 - 5 * p * p - 2 * p + 3)if __name__ == '__main__': solutionSpace = [-2, 5] #w: æƒ¯æ€§æƒé‡ w = 1 #c1, c2: ä¸ªä½“å­¦ä¹ å› å­ï¼Œç¤¾ä¼šå­¦ä¹ å› å­ c1 = 2 c2 = 2 #birdNum:ç§ç¾¤è§„æ¨¡ birdNum = 5 #maxIter æœ€å¤§è¿­ä»£æ¬¡æ•° maxIter = 10000 # max_stable:æœ€ä½³ä½ç½®è¿ç»­æœªæ›´æ–°çš„è½®æ•° max_stable = 5 max = PSO(fx_max_fit, birdNum, w, c1, c2, solutionSpace, 5) min = PSO(fx_min_fit, birdNum, w, c1, c2, solutionSpace, 5) max.solve(maxIter) min.solve(maxIter) print(max.best.lBestPosition) print(min.best.lBestPosition)","tags":[{"name":"PSO","slug":"PSO","permalink":"http://changzihao.me/tags/PSO/"},{"name":"ç²’å­ç¾¤","slug":"ç²’å­ç¾¤","permalink":"http://changzihao.me/tags/ç²’å­ç¾¤/"}]},{"title":"Hello World","date":"2017-11-16T08:35:52.000Z","path":"2017/11/16/hello-world/","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new \"My New Post\" More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment","tags":[{"name":"hexo","slug":"hexo","permalink":"http://changzihao.me/tags/hexo/"}]}]